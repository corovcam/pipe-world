<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Pipe World Docs | Pipe World game documentation. Game Pipe World is a variant of the popular type of puzzle games similar to Pipe Mania or Water Pipes, where the common goal is to transport liquid from one end to the other using a system of interconnected Pipes.</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Pipe World Docs" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Pipe World game documentation. Game Pipe World is a variant of the popular type of puzzle games similar to Pipe Mania or Water Pipes, where the common goal is to transport liquid from one end to the other using a system of interconnected Pipes." />
<meta property="og:description" content="Pipe World game documentation. Game Pipe World is a variant of the popular type of puzzle games similar to Pipe Mania or Water Pipes, where the common goal is to transport liquid from one end to the other using a system of interconnected Pipes." />
<meta property="og:site_name" content="Pipe World Docs" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Pipe World Docs" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Pipe World game documentation. Game Pipe World is a variant of the popular type of puzzle games similar to Pipe Mania or Water Pipes, where the common goal is to transport liquid from one end to the other using a system of interconnected Pipes.","headline":"Pipe World Docs","url":"/pipe-world/scripts-docs/GameManager.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/pipe-world/assets/main.css"><link type="application/atom+xml" rel="alternate" href="/pipe-world/feed.xml" title="Pipe World Docs" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/pipe-world/">Pipe World Docs</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/pipe-world/doxygen/">Doxygen</a><a class="page-link" href="/pipe-world/scripts.html">Script Docs</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <h2 id="gamemanagercs"><a href="https://github.com/corovcam/pipe-world/blob/main/Assets/Scripts/GameManager.cs">GameManager.cs</a></h2>

<p>The <code class="language-plaintext highlighter-rouge">GameManager</code> class in <code class="language-plaintext highlighter-rouge">pipe-world</code> is responsible for managing the core water and lava flow mechanics in the game. It tracks pipes that need to be processed during flow and checks for win conditions. The class uses queues, dictionaries, and hashsets to manage the flow and to prevent processing the same pipe multiple times.</p>

<p>The <code class="language-plaintext highlighter-rouge">Start()</code> method initializes the necessary variables, including the LevelHandler (<code class="language-plaintext highlighter-rouge">lh</code>) and the GUIHandler. It also sets the initial values for the <code class="language-plaintext highlighter-rouge">isWon</code> and <code class="language-plaintext highlighter-rouge">flowsStarted</code> flags.</p>

<p>The <code class="language-plaintext highlighter-rouge">Update()</code> method checks if all flows have started and finished, then evaluates win conditions. If water or lava reaches the correct endpoint, the game is won, and the endgame menu is shown.</p>

<p>The <code class="language-plaintext highlighter-rouge">StartFlow()</code> method initializes the required variables for starting a liquid flow (water or lava) and starts a coroutine for each liquid drop. Depending on the starting point, it instantiates water or lava flows and adds them to the <code class="language-plaintext highlighter-rouge">flowsFinished</code> list.</p>

<p>The <code class="language-plaintext highlighter-rouge">Flow()</code> function is used in a coroutine that uses Breadth-First Search (BFS) traversal to fill all connected pipes from the start pipe to the end pipe location and checks if there is such a path. The function takes the starting position, liquid flow type, and flow index as arguments. The function initializes the distances and visited dictionaries, sets the initial values of distances and visited, and enqueues the start pipe into the queue. The function uses a while loop to dequeue pipes from the queue until all connected pipes have been visited. The function sets the filled sprites for the start and end sprites and the filled green/grey sprites for the other pipes. The function loops through each IO direction of the pipe and checks if the IO port is available. If the IO port is available, the function checks the direction and continues to move the liquid in that direction. If the liquid can be moved to the next pipe, the functionupdates the previousPipe for wave animation, sets the distance of the next pipe, adds it to the visited set, and enqueues it into the queue. Once all connected pipes have been visited, the function sets the flowsFinished flag to true for the corresponding flow index.</p>

<p>Example of starting a flow:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">GameManager</span> <span class="n">gameManager</span> <span class="p">=</span> <span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">GameManager</span><span class="p">&gt;();</span>
<span class="n">gameManager</span><span class="p">.</span><span class="nf">StartFlow</span><span class="p">();</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">GameManager</code> class is essential to the <code class="language-plaintext highlighter-rouge">Pipe World</code> game as it manages the core logic for the game, including the flow of water and lava, as well as win conditions.</p>

<h3 id="questions--answers">Questions &amp; Answers</h3>

<ol>
  <li>
    <p><strong>What are the win conditions for the game?</strong></p>

    <p>The win condition is met when all flows (water and/or lava) have started and finished, and have reached their respective end points without any interruptions or mismatches in liquid type.</p>
  </li>
  <li>
    <p><strong>How does the GameManager handle multiple instances of liquid (water/lava) flows?</strong></p>

    <p>The GameManager maintains separate coroutines for each instance of liquid flow, keeping track of their finished status in a <code class="language-plaintext highlighter-rouge">flowsFinished</code> list and using a <code class="language-plaintext highlighter-rouge">flowIndex</code> counter to distinguish between different instances.</p>
  </li>
  <li>
    <p><strong>What is the purpose of the <code class="language-plaintext highlighter-rouge">distances</code> dictionary in the GameManager class?</strong></p>

    <p>The <code class="language-plaintext highlighter-rouge">distances</code> dictionary is used to store the integer distances of each visited pipe from the starting position. It is primarily used to distinguish different waves of animation during the flow of liquid through the pipes.</p>
  </li>
</ol>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/pipe-world/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Pipe World Docs</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Pipe World Docs</li><li><a class="u-email" href="mailto:martino.coro@gmail.com">martino.coro@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/corovcam"><svg class="svg-icon"><use xlink:href="/pipe-world/assets/minima-social-icons.svg#github"></use></svg> <span class="username">corovcam</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Pipe World game documentation. Game Pipe World is a variant of the popular type of puzzle games similar to Pipe Mania or Water Pipes,  where the common goal is to transport liquid from one end to the other using a system of interconnected Pipes.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
